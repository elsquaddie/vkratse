# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏

## 1Ô∏è‚É£ –í–∫–ª—é—á–∏ Dry Run —Ä–µ–∂–∏–º

–í Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables:
```
PAYMENT_DRY_RUN = true
```

–ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ –≤ `.env`:
```bash
PAYMENT_DRY_RUN=true
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è - redeploy –±–æ—Ç–∞.

## 2Ô∏è‚É£ –ü–æ–ª—É—á–∏ —Ç–µ—Å—Ç–æ–≤—É—é Pro –ø–æ–¥–ø–∏—Å–∫—É

1. –û—Ç–∫—Ä–æ–π –±–æ—Ç–∞: [@chto_bilo_v_chate_bot](https://t.me/chto_bilo_v_chate_bot)
2. –ù–∞–ø–∏—à–∏: `/premium`
3. –ù–∞–∂–º–∏: **üí≥ –ö—É–ø–∏—Ç—å Pro**
4. –í—ã–±–µ—Ä–∏: **‚≠ê Telegram Stars** –∏–ª–∏ **üí≥ –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞**
5. ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (DRY RUN)

## 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã –ø–æ—è–≤–∏–ª–∞—Å—å

1. –ù–∞–ø–∏—à–∏: `/premium`
2. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–Ω–æ–ø–∫–∞: **‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É**
3. –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ –Ω–µ—Ç - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞ –∏–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫

## 4Ô∏è‚É£ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –æ—Ç–º–µ–Ω—É

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π –¥–∏–∞–ª–æ–≥ –æ—Ç–º–µ–Ω—ã
–ù–∞–∂–º–∏ **‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É**

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
- ‚úÖ –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã (Stars/–ö–∞—Ä—Ç–∞/etc)
- ‚úÖ –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö
- ‚úÖ –î–≤–µ –∫–Ω–æ–ø–∫–∏: "–î–∞, –æ—Ç–º–µ–Ω–∏—Ç—å" –∏ "–ù–µ—Ç, –æ—Å—Ç–∞–≤–∏—Ç—å"

### –®–∞–≥ 2: –û—Ç–º–µ–Ω–∏ –ø–æ–¥–ø–∏—Å–∫—É
–ù–∞–∂–º–∏ **‚úÖ –î–∞, –æ—Ç–º–µ–Ω–∏—Ç—å**

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ "–ü–æ–¥–ø–∏—Å–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞! (DRY RUN)"
- ‚úÖ –¢–µ–∫—Å—Ç –æ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ Free —Ç–∞—Ä–∏—Ñ
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "¬´ –ö Premium"

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
–ù–∞–ø–∏—à–∏: `/mystatus`

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
- ‚úÖ –¢–∞—Ä–∏—Ñ: üÜì Free
- ‚úÖ –õ–∏–º–∏—Ç—ã Free —Ç–∞—Ä–∏—Ñ–∞ (30 —Å–æ–æ–±—â–µ–Ω–∏–π/–¥–µ–Ω—å, etc)

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ–ø–∞–ª–∞
–ù–∞–ø–∏—à–∏: `/premium`

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ **üí≥ –ö—É–ø–∏—Ç—å Pro** (–∞ –Ω–µ "–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É")
- ‚úÖ –¢–µ–∫—Å—Ç "üÜì FREE (—Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω)"

## ‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

–ï—Å–ª–∏ –≤—Å–µ 4 —à–∞–≥–∞ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç

–ß—Ç–æ–±—ã —Å–Ω–æ–≤–∞ –ø–æ–ª—É—á–∏—Ç—å Pro –¥–ª—è —Ç–µ—Å—Ç–∞:
1. –ù–∞–ø–∏—à–∏ `/premium`
2. –ù–∞–∂–º–∏ **üí≥ –ö—É–ø–∏—Ç—å Pro**
3. –í—ã–±–µ—Ä–∏ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
4. –ü–æ–≤—Ç–æ—Ä–∏ —à–∞–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üêõ –ß—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫?

### –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É" –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞: `/mystatus`
- –ü—Ä–æ–≤–µ—Ä—å –≤ –ë–î: `SELECT * FROM subscriptions WHERE user_id = YOUR_ID`
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å `is_active = true`

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ
- –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ Vercel: Function Logs
- –ò—â–∏ —Å—Ç—Ä–æ–∫–∏ —Å `[DRY RUN] Cancelling subscription`
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `PAYMENT_DRY_RUN=true` –≤ Environment Variables

### –ü–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å –≤—Å—ë –µ—â—ë Pro
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `Subscription deactivated for user ...`
- –ü—Ä–æ–≤–µ—Ä—å –ë–î: `is_active` –¥–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å `false`
- –ü–æ–ø—Ä–æ–±—É–π `/mystatus` —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥

## üìä Production —Ç–µ—Å—Ç (–∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤)

1. –û—Ç–∫–ª—é—á–∏ Dry Run: `PAYMENT_DRY_RUN=false`
2. Redeploy –±–æ—Ç–∞
3. –ü–æ–ª—É—á–∏ –†–ï–ê–õ–¨–ù–£–Æ Pro –ø–æ–¥–ø–∏—Å–∫—É (–æ–ø–ª–∞—Ç–∏ Stars –∏–ª–∏ –∫–∞—Ä—Ç–æ–π)
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –æ—Ç–º–µ–Ω—É (–¥–µ–Ω—å–≥–∏ –ù–ï –≤–µ—Ä–Ω—É—Ç—Å—è!)
5. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ dry_run

## üìù –õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –≤ Dry Run
```
INFO: [DRY RUN] Cancelling subscription for user 123456789
INFO: Subscription deactivated for user 123456789
```

### –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –≤ Production
```
INFO: Cancelling subscription for user 123456789, payment_method=telegram_stars
INFO: Subscription deactivated for user 123456789
INFO: Subscription cancelled successfully for user 123456789
```

## üéØ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è:
- ‚úÖ Telegram Stars
- ‚úÖ –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã (YooKassa)
- ‚úÖ Tribute / Manual grants
- ‚úÖ Dry run —Ä–µ–∂–∏–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [TESTING_SUBSCRIPTION_CANCEL.md](TESTING_SUBSCRIPTION_CANCEL.md)
